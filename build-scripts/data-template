#%Module1.0
# Author: Ziyue Cheng
# Almost all of them are automated, you can modify whatis, ModulesHelp, and REF_HOME as needed.
# Search TOCHANGE to find the targets.
# You can also load other modules in this modulefile.
#   module load java/17.0.12

# abs path of this file, like /somewhere/modules/modulefiles/genome-assembly/version
set abs_path [file normalize [info script]]
# full name of this module, like apps/genome-assembly/version
set ref_full_name [module-info name]
# name of this module, like genome-assembly
set ref_name [file dirname $ref_full_name]
# version of this reference, like star-gencode47-151
set ref_version [file tail $ref_full_name]
# abs path of modules, like /somewhere/modules
set module_root [file dirname [file dirname [file dirname $abs_path]]]
# abs path of the apps/genome-assembly/version , like /somewhere/modules/apps/genome-assembly/version
set ref_root [file join $module_root apps $ref_full_name]
# record current date time
set current_datetime [clock format [clock seconds] -format "%Y-%m-%d %T"]

# TOCHANGE: A brief description using module-whatis
module-whatis "Loads $ref_name version $ref_version"

# TOCHANGE: Detailed Help Section
proc ModulesHelp { } {
    # cannot use variables here
    puts stderr "Placeholder for the usage of this module."
}

# TOCHANGE: Set custom environment variables and aliases
# setenv REF_HOME $ref_root
# setalias run_app "$ref_root/bin/app"

